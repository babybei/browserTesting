<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>检测浏览器</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<!-- Place favicon.ico in the root directory -->

	<!-- build:css styles/vendor.css -->
	<!-- bower:css -->
	<link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.css" />
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:css styles/main.css -->
	<link rel="stylesheet" href="styles/header.css">
	<link rel="stylesheet" href="styles/testing.css">
	<!-- endbuild -->

	<!-- build:js scripts/vendor/modernizr.js -->
	<script src="../bower_components/modernizr/modernizr.js"></script>
	<!-- endbuild -->
</head>
<body>
	<!-- header -->
	<div class="header">
		<div class="container containerfirst mainContainer">
			<div class="ik-logo"><a href="/userCenter"><img src="http://static2.kaolawu.com/static/common/img/logo.png"></a></div>
			<ul class="nav nav__menu">
				<li class="page-item usercenter" data-img="none">
					<a href="/userCenter">个人中心</a>
				</li>
				<li class="page-item toefl current" data-img="http://static2.kaolawu.com/static/studymain/img/toefl.jpg"><a href="/toefl">TOEFL</a></li>
				<li class="page-item gre" data-img="http://static2.kaolawu.com/static/studymain/img/gre.jpg"><a href="/gre">GRE</a></li>
				<li class="page-item gmat" data-img="http://static2.kaolawu.com/static/studymain/img/gmat.jpg"><a href="/gmat">GMAT</a></li>
				<li class="page-item logbook" data-img="none"><a href="/logBook">记录本</a></li>
				
				<input type="hidden" id="stuCode" value="VBJ100086">
				<li class="page-item classroom nav__menu-item">
					<a href="javascript:void(0)">
						<span>课堂</span>
						<i class="icon-sort-down keDown"></i> 
					</a>
				</li>

				<li class="page-item active"></li>
			</ul>
			
			<div class="float-right">
				<div class="welcome">
					<a class="welcome" href="http://passport.kaolawu.com/user/detail">张三</a>
					
				</div>

				<a class="exit" href="http://passport.kaolawu.com/logout?gotoURL=http://www.kaolawu.com/logout">退出</a>
			</div>
		</div>
	</div>
	<!-- 内容 -->
	<div class="container">
		<h1 class="title24">正在对模考环境及设备进行检测......</h1>
		<ul class="result">
			<li class="iconTest chrome"></li>
			<li class="r-right">
				<div style="margin-bottom: 10px;">浏览器检测<div id="browserR" class="iconTest refresh"></div></div>
				<div class="result01" style="display: none;">

				</div>
			</li>
		</ul>
		<ul class="result"></ul>
	</div>
	<!-- build:js scripts/vendor.js -->
	<!-- bower:js -->
	<script src="../bower_components/jquery/dist/jquery.js"></script>
	<!-- endbower -->
	<!-- endbuild -->
	<script type="text/javascript">
		$(function(){
			var userAgent =navigator.userAgent;
			var b_version=navigator.appVersion;
		// //ie 
		// if (explorer.indexOf("MSIE") >= 0) {
		// alert("ie");
		// }
		// //firefox 
		// else if (explorer.indexOf("Firefox") >= 0) {
		// alert("Firefox");
		// }
		// //Chrome
		// else if(explorer.indexOf("Chrome") >= 0){
		// alert("Chrome");
		// }
		// //Opera
		// else if(explorer.indexOf("Opera") >= 0){
		// alert("Opera");
		// }
		// //Safari
		// else if(explorer.indexOf("Safari") >= 0){
		// alert("Safari");
		// } 
		// //Netscape
		// else if(explorer.indexOf("Netscape")>= 0) { 
		// alert('Netscape'); 
		// } 
		var resultHtml='';
		var isSafari = userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") == -1; //判断是否Safari浏览器  
      	var isChrome = userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Safari") > -1; //判断Chrome浏览器 
      	var browserSure=false;
      	if (userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Safari") > -1) {
			// alert("浏览器名称："+"Chrome"+"浏览器版本："+ parseFloat(b_version.split('Chrome/')[1]));
			var chrome_version=parseFloat(b_version.split('Chrome/')[1]);
			if(chrome_version<=53){
				browserSure=true;
			}else{  //浏览器不合格版本地与53
				resultHtml='<p>您的浏览器不符合模考要求，请按提示进行操作：</p><p>1.卸载此浏览器</p><p>2.下载并安装指定版本谷歌浏览器</p>';
			}
		}else{  //其他浏览器
			resultHtml='<p>请使用考拉屋模考专用谷歌浏览器，下载地址如下：</p>';
		}
		//系统类型判断
		var bit= GetOSInfo();
		switch(bit){
			case "WOW64":
				resultHtml+='<ul class="platform"><li><div class="iconTest window"></div><p>Windows64位版</p><div class="btn btn-down">立即下载</div></li></ul>';
				break;
			case "WOW32":
				resultHtml+='<ul class="platform"><li><div class="iconTest window"></div><p>Windows32位版</p><div class="btn btn-down">立即下载</div></li></ul>';
				break;
			case "Mac":
				resultHtml+='<ul class="platform"><li><div class="iconTest mac"></div><p>MAC版</p><div class="btn btn-down">立即下载</div></li></ul>';
				break;
			default:
				resultHtml+='<ul class="platform"><li><div class="iconTest window"></div><p>Windows32位版</p><div class="btn btn-down">立即下载</div></li><li><div class="iconTest window"></div><p>Windows64位版</p><div class="btn btn-down">立即下载</div></li><li><div class="iconTest mac"></div><p>MAC版</p><div class="btn btn-down">立即下载</div></li></ul>';
				break;
		}
		//停止动画
		setTimeout(function(){
			$(".refresh").css('animation-play-state', 'paused');  //动画开始running
			$("#browserR").removeClass('refresh');
			if(browserSure){
				$("#browserR").addClass('right');
			}else{
				$("#browserR").addClass('wrong');
				$(".result01").html(resultHtml);
				$(".result01").css("display","block");
			}
		},300);
	});
	//判断系统类型
	function GetOSInfo()
	{ 
		var _pf=navigator.platform; 
		var appVer=navigator.userAgent; 
		if(_pf=="Win32" || _pf == "Windows") 
		{ 
			if(appVer.indexOf("WOW64")>-1)
			{ 
				return "WOW64";   //64位
			}
			else
			{ 
				return "WOW32";   //32位
			} 
			// if(appVer.indexOf("Windows NT 6.0") > -1 || appVer.indexOf("Windows Vista") > -1) 
			// { 
			// 	if(_bit=='64位' || appVer.indexOf("Windows Vista") > -1)
			// 	{ 
			// 		return 'Windows_vista '+_bit;
			// 	}
			// 	else
			// 	{ 
			// 		return "Unknow1"; 
			// 	} 
			// }
			// else if(appVer.indexOf("Windows NT 6.1") > -1 || appVer.indexOf("Windows 7") > -1) 
			// { 
			// 	if(_bit=='32位' || appVer.indexOf("Windows 7") > -1)
			// 	{ 
			// 		return 'Windows_7 '+_bit; 
			// 	}
			// 	else
			// 	{ 
			// 		return "Unknow"; 
			// 	} 
			// }
			// else
			// { 
			// 	try
			// 	{ 
			// 		var _winName = Array('2000','XP','2003'); 
			// 		var _ntNum = appVer.match(/Windows NT 5.\d/i).toString(); 
			// 		return 'Windows_' + _winName[_ntNum.replace(/Windows NT 5.(\d)/i,"$1")]+" "+_bit; 
			// 	}
			// 	catch(e)
			// 	{
			// 		return 'Windows';
			// 	} 
			// } 
		}
		else if(_pf.indexOf("Mac")>-1)
		{ 
			return "Mac"; 
		}
		// else if(_pf == "X11") 
		// { 
		// 	return "Unix"; 
		// }
		// else if(String(_pf).indexOf("Linux") > -1) 
		// { 
		// 	return "Linux"; 
		// }
		else
		{ 
			return "Unknow"; 
		} 
	}
</script>
</body>
</html>